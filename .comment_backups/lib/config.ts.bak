/**
 * LumenPay Global Configuration
 * 
 * Centralized configuration for the entire application.
 * Copy relevant parts to mobile/lib/config.ts for mobile app.
 */

// Network Configuration
export const NETWORK = {
  // Current network (switch to 'public' for mainnet)
  CURRENT: (process.env.STELLAR_NETWORK || 'testnet') as 'testnet' | 'public',

  // Horizon endpoints
  HORIZON_TESTNET: 'https://horizon-testnet.stellar.org',
  HORIZON_PUBLIC: 'https://horizon.stellar.org',

  // Network passphrases
  PASSPHRASE_TESTNET: 'Test SDF Network ; September 2015',
  PASSPHRASE_PUBLIC: 'Public Global Stellar Network ; September 2015',

  // Friendbot (testnet only)
  FRIENDBOT_URL: 'https://friendbot.stellar.org',
};

// Asset Configuration
export const ASSETS = {
  // Native XLM
  NATIVE: { code: 'XLM', issuer: null },

  // USDC on testnet
  USDC_TESTNET: {
    code: 'USDC',
    issuer: process.env.STELLAR_USDC_ISSUER || 'GBBD47IF6LWK7P7MDEVSCWR7DPUWV3NY3DTQEVFL4NAT4AQH3ZLLFLA5',
  },

  // USDC on mainnet (Circle)
  USDC_MAINNET: {
    code: 'USDC',
    issuer: 'GA5ZSEJYB37JRC5AVCIA5MOP4RHTM335X2KGX3IHOJAPP5RE34K4KZVN',
  },
};

// API Endpoints
export const API = {
  // Base URL (auto-detect for Next.js)
  BASE_URL: process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000',

  // Auth endpoints
  AUTH: {
    NONCE: '/api/wallet/auth/nonce',
    VERIFY: '/api/wallet/auth/verify',
    SESSION: '/api/wallet/auth/session',
  },

  // Transaction endpoints
  TX: {
    BUILD: '/api/wallet/tx/build',
    SUBMIT: '/api/wallet/tx/submit',
  },

  // KYC endpoints
  KYC: {
    DIDIT_START: '/api/kyc/didit',
    DIDIT_STATUS: '/api/kyc/didit',
  },
};

// Feature Flags
export const FEATURES = {
  // Enable stock trading
  STOCKS_ENABLED: process.env.ENABLE_STOCK_TRADING !== 'false',

  // Enable loans
  LOANS_ENABLED: process.env.ENABLE_LOANS !== 'false',

  // Demo mode (auto-approve KYC)
  KYC_DEMO_MODE: process.env.KYC_DEMO_MODE === 'true',
};

// Branding
export const BRAND = {
  // Product name
  NAME: 'LumenPay',

  // Wallet component name
  WALLET_NAME: 'LumenVault',

  // Tagline
  TAGLINE: 'Your Keys, Your Coins',

  // Colors
  COLORS: {
    PRIMARY: '#0A0A0F',
    ACCENT: '#00E5FF',
    SUCCESS: '#22C55E',
    ERROR: '#EF4444',
  },
};

// KYC Configuration
export const KYC = {
  // Didit configuration
  DIDIT: {
    APP_ID: process.env.DIDIT_APP_ID || '',
    API_URL: process.env.DIDIT_API_URL || 'https://apx.didit.me/v1',
  },

  // KYC levels
  LEVELS: {
    0: { name: 'Unverified', features: ['payments'] },
    1: { name: 'Biometric Verified', features: ['payments', 'stocks'] },
    2: { name: 'Extended Verified', features: ['payments', 'stocks', 'loans'] },
  },
};

// Transaction Limits (in USD)
export const LIMITS = {
  // Per-transaction limits by KYC level
  PER_TX: {
    0: 100,
    1: 10000,
    2: 100000,
  },

  // Daily limits by KYC level
  DAILY: {
    0: 1000,
    1: 50000,
    2: 500000,
  },
};

// Helper functions
export function getHorizonUrl(): string {
  return NETWORK.CURRENT === 'testnet'
    ? NETWORK.HORIZON_TESTNET
    : NETWORK.HORIZON_PUBLIC;
}

export function getNetworkPassphrase(): string {
  return NETWORK.CURRENT === 'testnet'
    ? NETWORK.PASSPHRASE_TESTNET
    : NETWORK.PASSPHRASE_PUBLIC;
}

export function getUSDCAsset() {
  return NETWORK.CURRENT === 'testnet'
    ? ASSETS.USDC_TESTNET
    : ASSETS.USDC_MAINNET;
}

// Legacy config export for backwards compatibility
export const config = {
  appName: BRAND.NAME,
  stellar: {
    network: NETWORK.CURRENT,
    horizonUrl: getHorizonUrl(),
    usdcIssuer: getUSDCAsset().issuer,
  },
  supabase: {
    url: process.env.NEXT_PUBLIC_SUPABASE_URL!,
    anonKey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
  },
};
